#fabián #sql #mpa
## Elimina matricula de una persona
Además borra el proceso, es decir, en que punto del proceso de matricula que quedó. 

```sql
-- ELIMINA MATRICULA
DELETE FROM dbo.MATRICULA 
WHERE MAT_C_RUT = 18997239 
AND MAT_C_CODIGO_CARRERA = 70 
AND MAT_ANO = 2022 
AND MAT_NUMERO_PERIODO = 1 
AND MAT_T_PERIODO = 1
-- ELIMINA EVENTO PROCESO
DELETE FROM dbo.EVENTO_PROCESO 
WHERE EVPR_RUT = 18997239 
AND EVPR_C_CARRERA = 70 
AND EVPR_ANO = 2022 
AND EVPR_NUMERO_PERIODO = 1 
AND EVPR_T_PERIODO = 1 
AND EVPR_T_PROCESO = 61
```
---
#fabián #sql #mpa
## Muestra los evento procesos que a realizado un usuario
```sql
SELECT 
	ep.EVPR_T_EVENTO , 
	te.TEV_DESCRIPCION , 
	ep.EVPR_E_EVENTO  
FROM EVENTO_PROCESO ep
INNER JOIN dbo.T_EVENTO te ON te.TEV_TIPO = ep.EVPR_T_EVENTO 
WHERE EVPR_RUT = 18997239
AND ep.EVPR_ANO = 2022
```

---
#sql #mpa #fabián 
## Sin Nombre
```sql
SELECT * FROM dbo.PERIODO_PROCESO pp 
WHERE pp.PEPR_T_PROCESO = 61 
```

----
#sql #mpa #fabián 
## Ver matricula de un estudiante
```sql
SELECT * FROM dbo.MATRICULA m WHERE m.MAT_C_RUT = 18997239
```

---

#sql #felipe #mpa
## Trae Alumnos
```sql
SELECT DISTINCT 
	CAST(dbo.ALUMNO.ALUM_C_RUT AS varchar(10)) + 
   dbo.PERSONA.PERS_DV as RUT,
	--dbo.USUARIO.USUA_USERNAME,
	dbo.USUARIO.USUA_PASSWORD  ,
	dbo.ALUMNO.ALUM_C_CODIGO_CARRERA,
	dbo.PERFIL.PERF_C_UNIDAD, 
	dbo.ABONO.ABON_MONTO 
	FROM dbo.PERSONA 
INNER JOIN (dbo.USUARIO INNER JOIN (dbo.ABONO RIGHT JOIN (dbo.MATRICULA RIGHT JOIN (dbo.PERFIL INNER JOIN (dbo.ALUMNO INNER JOIN dbo.PERIODO_PROCESO ON (dbo.ALUMNO.ALUM_ANO_INGACAD = dbo.PERIODO_PROCESO.PEPR_ANO) 
AND (dbo.ALUMNO.ALUM_ANO_INGADM = dbo.PERIODO_PROCESO.PEPR_ANO)) ON dbo.PERFIL.PERF_RUT = dbo.ALUMNO.ALUM_C_RUT) ON (dbo.MATRICULA.MAT_C_CODIGO_CARRERA = dbo.ALUMNO.ALUM_C_CODIGO_CARRERA) AND (dbo.MATRICULA.MAT_C_RUT = dbo.ALUMNO.ALUM_C_RUT)) ON (dbo.ABONO.ABON_C_CARRERA = dbo.ALUMNO.ALUM_C_CODIGO_CARRERA) AND (dbo.ABONO.ABON_RUT = dbo.ALUMNO.ALUM_C_RUT)) ON dbo.USUARIO.USUA_RUT = dbo.ALUMNO.ALUM_C_RUT) ON dbo.PERSONA.PERS_RUT = dbo.USUARIO.USUA_RUT 
WHERE (((dbo.ABONO.ABON_MONTO)<208000) AND ((dbo.MATRICULA.MAT_C_RUT) Is Null) AND ((dbo.MATRICULA.MAT_C_CODIGO_CARRERA) Is Null) AND ((dbo.PERIODO_PROCESO.PEPR_VIGENTE)=1) AND ((dbo.PERFIL.PERF_E_PERFIL)=1) AND ((dbo.PERFIL.PERF_T_PERFIL)=6) AND ((dbo.ALUMNO.ALUM_T_INGRESO)=1) AND ((dbo.PERIODO_PROCESO.PEPR_T_PROCESO)=61))
```

---

## La Query si mala

```sql
SELECT DISTINCT 
	dbo_ALUMNO.ALUM_C_RUT, 
	dbo_PERSONA.PERS_DV, 
	dbo_USUARIO.USUA_PASSWORD,
	dbo_ALUMNO.ALUM_C_CODIGO_CARRERA,
	dbo_PERFIL.PERF_C_UNIDAD, 
	dbo_ABONO.ABON_MONTO 
	FROM dbo_PERSONA 
INNER JOIN (dbo_USUARIO INNER JOIN (dbo_ABONO RIGHT JOIN (dbo_MATRICULA RIGHT JOIN (dbo_PERFIL INNER JOIN (dbo_ALUMNO INNER JOIN dbo_PERIODO_PROCESO ON (dbo_ALUMNO.ALUM_ANO_INGACAD = dbo_PERIODO_PROCESO.PEPR_ANO) AND (dbo_ALUMNO.ALUM_ANO_INGADM = dbo_PERIODO_PROCESO.PEPR_ANO)) ON dbo_PERFIL.PERF_RUT = dbo_ALUMNO.ALUM_C_RUT) ON (dbo_MATRICULA.MAT_C_CODIGO_CARRERA = dbo_ALUMNO.ALUM_C_CODIGO_CARRERA) AND (dbo_MATRICULA.MAT_C_RUT = dbo_ALUMNO.ALUM_C_RUT)) ON (dbo_ABONO.ABON_C_CARRERA = dbo_ALUMNO.ALUM_C_CODIGO_CARRERA) AND (dbo_ABONO.ABON_RUT = dbo_ALUMNO.ALUM_C_RUT)) ON dbo_USUARIO.USUA_RUT = dbo_ALUMNO.ALUM_C_RUT) ON dbo_PERSONA.PERS_RUT = dbo_USUARIO.USUA_RUT WHERE (((dbo_ABONO.ABON_MONTO)<208000) AND ((dbo_MATRICULA.MAT_C_RUT) Is Null) AND ((dbo_MATRICULA.MAT_C_CODIGO_CARRERA) Is Null) AND ((dbo_PERIODO_PROCESO.PEPR_VIGENTE)=True) AND ((dbo_PERFIL.PERF_E_PERFIL)=1) AND ((dbo_PERFIL.PERF_T_PERFIL)=6) AND ((dbo_ALUMNO.ALUM_T_INGRESO)=1) AND ((dbo_PERIODO_PROCESO.PEPR_T_PROCESO)=61));
```
